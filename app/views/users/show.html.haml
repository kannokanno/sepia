%h1 Your Status

.hero-unit
  %h2 Base Informations
  = form_for @user, html: { id: 'user-edit-form', class: 'form-horizontal' } do |f|
    .control-group
      %label.control-label{for: 'name'}
        Name
      .controls
        = f.text_field :name, name: 'name', style: 'margin-bottom:10px'
      %label.control-label{for: 'email'}
        E-Mail
      .controls
        = f.email_field :email, name: 'email', style: 'margin-bottom:10px'

.hero-unit
  %h2 Connecting Services

%script
  setTimeout(function(){
  var user = new User(#{current_user.id});
  var timer;
  var updateFunc = function(){
  if (timer) clearTimeout(timer);
  timer = setTimeout(function() {
  var p = user.update($('#user_name').val(), $('#user_email').val());
  p.done(function(a,b,c){ console.log(a);console.log(b);console.log(c); });
  timer = null;
  }, 1000);
  };
  $('#user_name').change(updateFunc);
  $('#user_email').change(updateFunc);
  console.log('OK');
  }, 1000);
